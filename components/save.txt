import { StatusBar } from 'expo-status-bar';
import { ScrollView, StyleSheet, Text, View } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';
import { useState, useEffect } from 'react';

import  MangaCard  from '../../components/MangaCard'
import { getManga, getMangaById, getMangaByTitle } from '../../utils/MangaDexClient'


export default function App() {
  const [mangaTitle, setMangaTitle] = useState("")
  const [mangaCoverUrl, setMangaCoverUrl] = useState("")

  useEffect(() => {
    async function fetchData() {
      try {
        const data = await getMangaById('ccb654fd-d4de-44d1-a9c1-f58ba34f3510');
        setMangaTitle(data.title);
        setMangaCoverUrl(data.cover);
      } catch (error) {
        console.error('Error fetching manga data:', error);
      }
    }
    fetchData();
  }, []);

  // getMangaByTitle('one piece')
  return (
    <SafeAreaView className="justify-center items-center h-full">
      <ScrollView>
      <Text className="text-2xl text-blue-500 font-extrabold">Hello World!</Text>
      
      <MangaCard
            title={mangaTitle}
            coverImg={mangaCoverUrl}
      />

      </ScrollView>
    </SafeAreaView>
  );
}

